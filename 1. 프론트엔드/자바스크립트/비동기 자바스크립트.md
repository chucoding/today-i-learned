# ë¹„ë™ê¸° ìë°”ìŠ¤í¬ë¦½íŠ¸

### ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë° ì—­ì‚¬
XMLHttpRequest(XHR) â‡’ jQuery AJAX â‡’ Fetch API

### AJAX
- Asynchronous JavaScript And XML
- ë¹„ë™ê¸° ìë°”ìŠ¤í¬ë¦½íŠ¸(í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ì´ í•„ìš”í•˜ì§€ ì•ŠìŒ)
- Googleì˜ Gmailê³¼ Mapìœ¼ë¡œ ë¶€í„° ì£¼ëª©ë°›ê¸° ì‹œì‘

### Fetch
```js
const form = new FormData(...);
fetch("https://jsonplaceholder.typicode.com/posts", {method:'POST', body:form})
.then(res => res.json())
.then(json => console.log(json));
```

### XMLHttpRequest(XHR)
TODO Study...

### jQuery AJAX(jqXHR)
```js
$.ajax( {
	success : function( result ) {
		// handle success
	},
	error : function( jqXHR, textStatus, errorThrown ) {
		// handle error
	}
});
```

readyState
- 0 : UnInitialized (ê°ì²´ë§Œ ìƒì„± - open ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì§€ ì•ŠìŒ)
- 1 : Loading - openë©”ì„œë“œ í˜¸ì¶œ
- 2 : Loaded - sendë©”ì„œë“œ í˜¸ì¶œ, status í—¤ë”ê°€ ë„ì°©í•˜ì§€ ì•Šì€ ìƒíƒœ
- 3 : Interactive - ë°ì´í„°ì˜ ì¼ë¶€ë¥¼ ë°›ì€ ìƒíƒœ
- 4 : Completed - ë°ì´í„° ì „ë¶€ ë°›ì€ ìƒíƒœ

status
- 200

stateText
- OK

>ğŸ’¡ readyState vs Promise <br/>
jQueryì—ì„œëŠ” readyStateë¡œ ì„œë²„ ì‘ë‹µ ìƒíƒœë¥¼ ì»¨íŠ¸ë¡¤í–ˆì§€ë§Œ fetchì—ì„œëŠ” Promiseë¥¼ ì‚¬ìš©í•œë‹¤. 

# CORS(Cross Origin Resource Sharing)
êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ (Cross-Origin Resource Sharing)<br/>
>ğŸ’¡ corsëŠ” ë¬´ì¡°ê±´ ë°±ì—”ë“œ(Nginx, WAS ë“±)ì—ì„œ í•´ê²°í•´ì•¼í•œë‹¤.

### í•´ê²°ë°©ë²•1 : í—¤ë” ì¡°ì‘
ì„œë²„ì—ì„œ ì‘ë‹µ í—¤ë”ì— ACAO(Access-Controll-Allow-Origin)ì„ ìš”ì²­ ë„ë©”ì¸ìœ¼ë¡œ í—ˆìš©<br/>
(CORS í†µê³¼ ì¡°ê±´ : Requesst Header Origin = Response Header Acess-Control-Allow-Origin)

### í•´ê²°ë°©ë²•2 : proxy ì„œë²„

- React CRA : setupProxy.jsë¥¼ ì´ìš©í•´ì„œ ë¡œì»¬ì—ì„œ proxyì„œë²„ë¥¼ ë„ìš¸ ìˆ˜ ìˆë‹¤.
- Nginx : í”„ë¡œë•ì…˜ì—ì„œëŠ” Nginxì˜ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ì´ìš©í•´ì„œ CORSë¥¼ ìš°íšŒí•  ìˆ˜ ìˆë‹¤.

ğŸ’¡ í”„ë¡ì‹œ ì„œë²„ ì—­í• 
1. í´ë¼ì´ì–¸íŠ¸ì˜ IPë¥¼ ì„œë²„ì—ì„œ ë°›ì„ë•Œ ì„ì˜ë¡œ ë°”ê¿”ë²„ë¦´ ìˆ˜ ìˆë‹¤. (ì¸í„°ë„·ì—ì„œëŠ” ì ‘ê·¼í•˜ëŠ” ì‚¬ëŒì˜ IPë¥¼ ëª¨ë¥´ê²Œë¨)
2. ë³´ë‚´ëŠ” ë°ì´í„°ë„ ì„ì˜ë¡œ ë°”ê¿€ ìˆ˜ ìˆìŒ
3. ë°©í™”ë²½, í•„í„°, ìºì‰¬ ë°ì´í„°(ì´ë¯¸ì§€ ì„ì‹œì €ì¥ ë“±) ì œê³µ ê¸°ëŠ¥

# Promise

fetch í•¨ìˆ˜ì˜ returnê°’ (ë¹„ë™ê¸°)

ì½œë°±ì§€ì˜¥ì„ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ì¤Œ

```jsx
timer(1000,function(){
	console.log('ì‘ì—…');
	timer(1000,function() {
		console.log('ì‘ì—…');
  });
});
```

```jsx
timer(1000)
	.then(function(){
		console.log('ì‘ì—…');
		return timer(1000);
  })
	.then(function(){
		console.log('ì‘ì—…');
  })
```

# method

---

| then | ì„±ê³µí–ˆì„ë•Œ ì‹¤í–‰ë¨(ì½œë°±í•¨ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ìŒ) |
| --- | --- |
| catch | ì‹¤íŒ¨í–ˆì„ë•Œ ì‹¤í–‰ë¨(ì½œë°±í•¨ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ìŒ) |

responseì— json ë©”ì„œë“œë¥¼ ì…í˜”ëŠ”ë°ë„ Promiseê°€ ë‚˜ì˜¤ëŠ” ê²ƒì€ ì•„ì§ ë°ì´í„°ë¥¼ ë‹¤ ë°›ì§€ ì•Šì€ ìƒíƒœì—¬ì„œ ê·¸ë ‡ë‹¤.(headerë§Œ ë„ì°©í•˜ê³  bodyê°€ ì˜¤ì§€ ì•ŠìŒ)

ê·¸ë˜ì„œ ë‹¤ì‹œ ì²´ì´ë‹(.then)ì„ í†µí•´ ì‘ì—… (thenì€ ë°ì´í„°ê°€ ë‹¤ ë„ì°©í•œ ì´í›„ì— ì‹¤í–‰ë¨)

ê·¸ê²ƒì´ ì‹«ë‹¤ë©´ ì „ì²´ì— awaitì„ ê±¸ì–´ì„œ ê¸°ë‹¤ë¦° ì´í›„ì— jsonì„ ì…íˆë©´ ë©ë‹ˆë‹¤.

# await

---

Promiseë¥¼ í•œ ë‹¨ê³„ ë” ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ì¤Œ

(ì™¼ìª½ ì½”ë“œì™€ ì˜¤ë¥¸ìª½ ì½”ë“œëŠ” ë™ì¼)

```jsx
timer(1000)
	.then(function(){
		console.log('ì‘ì—…');
		return timer(1000);
  })
	.then(function(){
		console.log('ì‘ì—…');
  })
```

```jsx
async function run() {
	await timer(1000)
	console.log('ì‘ì—…')
	await timer(1000)
	console.log('ì‘ì—…')
}

run();
```

# Promise.all

---

ë™ì‹œì— ì—¬ëŸ¬ê°œ ì‹¤í–‰í• ë•Œ ìœ ìš©

```jsx
Promise.all([ axios.get('/url1'), axios.get('/url2')])
.then(()=>{ 
   //
})
```

# ì°¸ê³ ìë£Œ
| TITLE | URL |
| --- | --- |
| AJAX, FETCH ì—­ì‚¬ | https://junhobaik.github.io/ajax-xhr-fetch/ |