# AJAX & fetch
- Asynchronous JavaScript And XML
- 비동기 자바스크립트(페이지 새로고침이 필요하지 않음)
- Google의 Gmail과 Map으로 부터 주목받기 시작

### 역사
XMLHttpRequest(XHR) ⇒ jQuery AJAX ⇒ Fetch API

# Fetch
API를 호출하고 응답 데이터를 받아옴
```js
const form = new FormData(...);
fetch("https://jsonplaceholder.typicode.com/posts", {method:'POST', body:form})
.then(res => res.json())
.then(json => console.log(json));
```

# XMLHttpRequest(XHR)
TODO Study...

# jQuery AJAX(jqXHR)
```js
$.ajax( {
	success : function( result ) {
		// handle success
	},
	error : function( jqXHR, textStatus, errorThrown ) {
		// handle error
	}
});
```

### jqXHR error handling
readyState
- 0 : UnInitialized (객체만 생성 - open 메서드가 호출되지 않음)
- 1 : Loading - open메서드 호출
- 2 : Loaded - send메서드 호출, status 헤더가 도착하지 않은 상태
- 3 : Interactive - 데이터의 일부를 받은 상태
- 4 : Completed - 데이터 전부 받은 상태

status/stateText - 서버로부터의 응답상태
- 200 : OK - 요청 성공
- 403 : Forbidden - 접근 거부
- 404 : Not Found - 페이지 없음
- 500 : Internal Server Error - 서버 오류 발생

# Cross Origin Resource Sharing
cors는 무조건 백엔드에서 해결해야한다.(또는 Nginx등의 웹 서버)

Request 헤더의 Origin과 response 헤더의 Acess-Control-Allow-Origin이 동일해야 CORS에 통과가 되므로 무조건 서버에서 응답 헤더에 Access-Controll-Allow-Origin을 요청 도메인으로 허용해야함.

CRA에서 제공하는 것은 Api 중계서버를 하나두어서 중계 서버에서 요청 후 응답에 ACAO 헤더를 세팅해 주거나 중계서버를 같은 도메인에서 실행하여 CORS를 우회하는 경우가 있고 이 경우가 proxy 서버라고 부르는 경우가 되겠습니다.

### 해결방법(proxy)

https://xiubindev.tistory.com/115

https://velog.io/@wlsdud2194/cors

💡 프록시 서버 역할

1. 클라이언트의 IP를 서버에서 받을때 임의로 바꿔버릴 수 있다. (인터넷에서는 접근하는 사람의 IP를 모르게됨)
2. 보내는 데이터도 임의로 바꿀 수 있음
3. 방화벽, 필터, 캐쉬 데이터(이미지 임시저장 등) 제공 기능

# 참고자료
| TITLE | URL |
| --- | --- |
| AJAX, FETCH 역사 | https://junhobaik.github.io/ajax-xhr-fetch/ |
|  |  |