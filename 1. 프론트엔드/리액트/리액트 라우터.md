# ReactRouter
path속성으로 자신이 원하는 URL 주소를 만들고 그 해당 URL에 들어갈 컴포넌트들을 지정
(브라우저 이동 없이 컴포넌트만 바꿔서 새로고침 없이 빠른 페이지 전환)


# react-router-dom

### react-router-dom v6
```jsx
import App from './app'

render(
	<Routes>
		<Route path="/" element={<App/>}></Route>
	</Routes>
);
```

### react-router-dom v5
```jsx
<Switch>
	<Route exact path="/" component={<App/>}>
</Switch>
```

❗주의사항

element에 App이랗게만 해놓으면 오류발생. App() 또는 <App/>으로 넣어야함

**nested routes**

라우트 안에 라우트(경로 깔끔하게 코딩 가능)

```jsx
import App from './app'
render(
	<Routes>
		<Route path="/about" element={<About/>}>
      <Route path="member" element={<div>멤버임</div>}/>
      <Route path="location">
				<div>위치정보임</div>
			</Route>
    </Route>
	</Routes>
);
```

💡netsted routes 사용시 부모컴포넌트에 <Outlet> 태그 사용시 자식 컴포넌트 사용가능

S**witch 써야함**

**useHistory**

```jsx
import { useHistory } from 'react-router-dom';
const history = useHistory();
history.push({
    pathname: "/login",
    state: {
        loginInfo: loginInfo
    }
})
```

**useNavigation**

```jsx
import { useNavigate } from 'react-router-dom';
const navigate = useNavigate();

navigate("/login", {
    replace: true,
    state: { loginInfo: loginInfo }
});
```

# 리액트 라우터 종류


## hashRouter

예전에는 URL위치를 변경하는데 javascript를 사용할 수 없어서 HashRouter를 사용함

| 장점 | - 주소를 이동한 후에 새로고침을 해도 에러가 나지 않고 화면이 나타난다.  (서버 요청 X)
- 배포에 편함 (새로고침때 브라우저만 동작하기 때문에 어떤 브라우저든 잘 동작) |
| --- | --- |
| 단점 | - 주소에 해쉬(#)가 붙는다.
- 검색 엔진이 읽지 못한다.
- History location을 지원하지 않음 (새로고침시 location.state 날라감) |
| 사용 | - 관리자페이지나 SEO에 전혀 상관없는 사이트에서 사용  |

## BrowserRouter

BrowerRouter가 탄생한 뒤로 많은 사람들이 더 이상 HashRouter를 사용하지 않음

| 장점 | - hashRouter와 달리 주소에 #이 붙지 않음.
- History location 지원 (새로고침시 location.state 유지) |
| --- | --- |
| 단점 | - 새로고침시 서버에 요청이 들어감
- 새로고침이나 주소값 접근 문제를 해결해야함
(서버에 추가적인 세팅필요 - 페이지가 존재하는 것을 서버에 알려줘야함) |
| 사용 |  |

main.jsx

```jsx
<Router basename={process.env.PUBLIC_URL}>
```

package.json

```json
"homepage": "[http://10.10.17.48:8080](http://10.10.17.48:8080/)"
```

## ProtectRouter

사용자의 권한에 따라 메뉴에 접근 가능하도록 도와주는 Router

 react-router-dom v6에서 사용 가

# 리액트 라우터 - hook

### useLocation

| pathname | 현재 주소의 경로 (쿼리스트링 제외) |
| --- | --- |
| search | 맨 앞의 ? 문자 포함한 쿼리스트링 값 |
| hash | 주소의 # 문자열 뒤의 값 (주로 History API 가 지원되지 않는 구형 브라우저에서 클라이언트 라우팅을 사용할 때 쓰는 해시 라우터에서 사용합니다.) |
| state | 페이지로 이동할때 임의로 넣을 수 있는 상태 값 |
| key | location 객체의 고유 값, 초기에는 default 이며 페이지가 변경될때마다 고유의 값이 생성됨 |

### useNavigate

Link는 특정 주소로 이동해주는 태그였다면, navigate는 특정 주소로 이동해주는 함수

```jsx
import { useNavigate } from 'react-router-dom';

function Func() {
  const navigate = useNavigate();

  const onClickImg = () => {
    navigate('/detail');
  };

  return (
  	<img src={...} alt={...} onClick={onClickImg} />
  );
}

export default Func;
```

⇒ react router v6부터는

```jsx
props.history.push('/')
```

이렇게 사용못하고 navigate를 이용해야한다~!

### 기타

~~history.createHref (deprecated)~~

createPath로 대체됨

https://github.com/remix-run/history/issues/365

# 참고자료


| TITLE | URL |
| --- | --- |
| react-router-dom v5 vs v6 | https://adjh54.tistory.com/48#4.%20%3CRoute%3E%20%ED%83%9C%EA%B7%B8%EC%9D%98%20%EC%86%8D%EC%84%B1%20%EC%9D%BC%EB%B6%80%EA%B0%80%20%EC%82%AC%EC%9A%A9%EB%90%98%EC%A7%80%20%EC%95%8A%EC%9D%8C-1 |
| HashRouter는 옛날 방식? | https://wonit.tistory.com/m/299 |
| react Router vs next Router | https://ordinarycoders.com/blog/article/nextjs-vs-react |
| useNavigate | https://basemenks.tistory.com/278 |
| protect router | https://velog.io/@mjhyp88/ReactTypescript-%EA%B6%8C%ED%95%9C-%EC%B2%B4%ED%81%AC-Routerreact-router-dom-v6 |

# 목차


[새 탭에서 상태값 불러오기(target=”_blank”)](https://www.notion.so/target-_blank-0ed0153239ee49f9ae7a85889bd43c77?pvs=21)