# 디자인토큰

## 구현 방법

### 디자이너 중심
1. 토큰 스튜디오(Tokens Studio) 플러그인 사용
- 1.1. 플러그인 내에서 토큰 생성 및 관리
- 1.2. 피그마 컴포넌트 및 variants와 연동
- 1.3. 테마별 관리(ex. dark/light) (유료 기능)
- 1.4. 토큰 데이터 연동 및 내보내기(ex. github에 json 파일 업로드)
2. 스타일 딕셔너리 (노드 tool)
- 2.1. 터미널 또는 Visual Studio 실행
- 2.2. `npm install style-dictionary`
- 2.3. style-dictionary 설정파일 생성 후 github에 위치한 json 소스경로 및 빌드 생성파일경로 매핑
- 2.4. 빌드 실행 `node 파일명.js` => css 파일이 생성됨.

### 개발자 중심
1. 피그마에서 디자인시스템 확인
2. vanilla-extract를 활용하여 토큰 및 varaiants 생성
3. 모듈 빌드해서 필요한 곳에서 사용

## vanilla-extract를 활용한 디자인토큰 구축

### 패키지 구조

```
design-system/             # 디자인시스템 패키지
   ├── src/styles/tokens/
   │   ├── color.css.ts    # 컬러 토큰
   │   └── palette.css.ts  # 색상 팔레트
   └── src/styles/themes/
       └── lightTheme.css.ts
```

### 동작 방식

```
Palette (purple300: '#8378F6')
    ↓
Theme (primary: purple300)
    ↓
CSS Variable (--color-primary: #8378F6)  // vanilla-extract 컴파일
    ↓
Component (ex. import {primary} from '@rsquare/ds'; backgroundColor: primary)
    ↓
Rendered CSS (background-color: var(--color-primary)) // 사용 앱에서 컴파일된 CSS
    ↓
Browser (실제 #8378F6 색상 렌더링)
```

### 구현 방법

#### 1. 토큰 정의

**color**

```tsx
// design-system/src/styles/tokens/color.css.ts

// Primary Colors
export const primary = createVar('color-primary');

// Secondary Colors
export const secondary = createVar('color-secondary');

// Color Groups for organized access
export const colors = {
  primary,
  secondary,
  ...
}

// createVar('color-primary') → 빌드시 CSS 변수명 '--color-primary' 생성
```

**palette**

```tsx
// Gray Scale
export const gray0 = '#FFFFFF';
export const gray100 = '#F7F8F9';
export const gray200 = '#F3F4F5';
...

// Color Groups
export const gray = {
  0: gray0,
  100: gray100,
  200: gray200,
  ...
} as const;
```

#### 2. 팔레트 값 매핑

테마에서 적용할 수 있도록 팔레트값 매핑

```tsx
// design-system/src/styles/themes/lightTheme.css.ts
import { createGlobalTheme } from '@vanilla-extract/css';
import * as colorTokens from '../tokens/color.css';
import * as palette from '../tokens/palette.css';

export const lightTheme = createGlobalTheme(':root', {
	[colorTokens.primary]: palette.purple300,
	// primary 토큰에 purple300 값('#8378F6') 할당
}
```

## 참고자료
https://brunch.co.kr/@design-staff/2
