# 싱글톤 패턴
하나의 클래스에 오직 하나의 인스턴스만 가지는 디자인 패턴

### 사용이유
1. 자원 절약  
    연결이 생성될 때마다 데이터베이스 서버와의 통신, 인증, 설정 등의 작업이 필요하기 때문에 매번 새로운 연결을 만드는 것은 비효율적

2. 일관성 유지  
    하나의 연결 객체를 사용하면 데이터베이스 트랜잭션 관리가 쉬워짐

3. 동기화 문제 해결  
    여러 쓰레드가 동시에 데이터베이스에 접근할 때, 각 쓰레드가 별도의 연결을 열고 닫는다면 동기화 문제 발생. (하나의 연결을 여러 쓰레드에서 공유하도록 해야함)

4. 관리 용이성  
    애플리케이션에서 데이터베이스 연결 설정을 중앙에서 관리

5. 성능 향상  
    데이터베이스 연결의 재사용을 통해 연결을 반복적으로 생성하고 파괴하는 데 드는 오버헤드를 줄일 수 있음

### 단점
- 연결이 끊어졌을 때의 재연결 로직을 잘 구현해야 함
- 다중 쓰레드 환경에서의 동기화 문제를 잘 관리해야 함
    - 자바스크립트는 다중 쓰레드 환경이 아니라서 동기화 문제가 발생하지 않지만 순서 보장 문제가 발생할 수 있음
- TDD 테스트 코드 작성이 어려움(단위 테스트 불가)

### 사용예시
- 데이터베이스 연결 객체
- 로그인 객체
- 설정 객체

```javascript
const URL = 'mongodb://localhost:27017/test';
const createConnection = url => ({"url" : url})
class DB {
    constructor(url) {
        if (DB.instance) {
            DB.instance = createConnection(url);
        }
        return DB.instance;
    }

    connect() {
        return this.instance;
    }
}

const a = new DB(URL);
const b = new DB(URL);

console.log(a === b); // true
```




