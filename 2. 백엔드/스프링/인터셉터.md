# Interceptor
Controllerë¥¼ í˜¸ì¶œí•˜ê¸° ì „ê³¼ í›„ì— ìš”ì²­ê³¼ ì‘ë‹µì„ ì°¸ì¡°í•˜ê±°ë‚˜ ê°€ê³µí•  ìˆ˜ ìˆëŠ” í•„í„°

- ë¡œê·¸ì¸ ì²´í¬, ê¶Œí•œ ì²´í¬ ë“±ì— ì‚¬ìš©
- ì„¸ì…˜ ì²´í¬ ë¡œì§ì„ ê° Controllerë§ˆë‹¤ ë„£ì–´ì£¼ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì¥ì ì´ ìˆìŒ (ë©”ëª¨ë¦¬ ì ˆì•½, ë³´ì•ˆ ê°•í™”)
- InterceptorëŠ” spring-web ë¼ì´ë¸ŒëŸ¬ë¦¬(ì„œë¸”ë¦¿ ê¸°ìˆ )ì— í¬í•¨ë¨

ğŸ’¡í•„í„°ì™€ì˜ ì°¨ì´ì ?  
í•„í„°ëŠ” Servlet ì»¨í…Œì´ë„ˆì—ì„œ ìš”ì²­ê³¼ ì‘ë‹µì„ ê°€ë¡œì±„ëŠ” ì»´í¬ë„ŒíŠ¸ë¡œ, ì»¨í…Œì´ë„ˆì˜ <b>DispatcherServlet ì´ì „ì— ì‹¤í–‰</b>, InterceptorëŠ” DispatcherServlet ë‚´ë¶€ì—ì„œ ì‹¤í–‰ëœë‹¤.


# ì„¤ì • ë°©ë²•
servlet.xml ì•„ë˜ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ì…ë ¥í•œë‹¤.
```
<interceptors>
        <interceptor>
            <mapping path="/admin"></mapping>
            <bean class="com.example.www.interceptor.PageInterceptor"/>
        </interceptor>
</interceptors>
```
ğŸ’¡ ìœ„ì™€ ê°™ì´ ì•ˆë  ê²½ìš° namespace í™•ì¸í•´ë³¼ê²ƒ.
servlet.xml ë§¨ ìœ„ beans ì„¤ì • ê°’ì„ í™•ì¸í•´ë³´ë©´
```
xmlns:mvc="http://www.springframework.org/schema/mvc"
```
ì´ëŸ°ê²Œ ìˆìœ¼ë©´ Interceptors ì„ ì–¸ì‹œ `mvc:`ë¥¼ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤.
```
<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/admin"></mapping>
        <bean class="com.example.www.interceptor.PageInterceptor"/>
    </mvc:interceptor>
</mvc:interceptors>
```

# êµ¬í˜„ ë°©ë²•
- ë°©ë²•1 : HandlerInterceptor ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
- ë°©ë²•2 : HandlerInterceptorAdaptor ì¶”ìƒ í´ë˜ìŠ¤ ì˜¤ë²„ë¼ì´ë”©  
â€» HandlerInterceptorAdaptor: HandlerInterceptorë¥¼ ìƒì†ë°›ì•„ì„œ êµ¬í˜„ë¨(Adaptorë¥¼ ì‚¬ìš©í•˜ë©´ í•„ìš”í•œ ë©”ì„œë“œë§Œ ê°€ì ¸ë‹¤ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆìŒ.)

```
public class PageInterceptor implements HandlerInterceptorAdapter {
	@Override
	public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)
			throws Exception {
		if (session.getAttribute("user_id") == null) {
            response.sendError(HttpServletResponse.SC_NOT_FOUND); // ì˜¤ë¥˜ ì „ì†¡
            /* response.sendRedirect(request.getContextPath()); */ //ë£¨íŠ¸ ê²½ë¡œ ì´ë™í•˜ê²Œ í•  ë•Œ ì‚¬ìš©
            return false; // ìš”ì²­ì„ ë” ì´ìƒ ì§„í–‰í•˜ì§€ ì•Šê³  ì¢…ë£Œ
        }
        return true; // ìš”ì²­ì„ ê³„ì† ì§„í–‰
	}
}
```

# ë©”ì†Œë“œ ì¢…ë¥˜
1. preHandle() : ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í˜¸ì¶œë˜ê¸° ì „ì— ì‹¤í–‰ë¨.
2. postHandle() : Viewê°€ ìƒì„±ë˜ê¸° ì´ì „ì— í˜¸ì¶œë¨.
3. afterCompletion() : ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œëœ í›„ì— ì‹¤í–‰ë¨.
![](https://github.com/chucoding/today-i-learned/assets/56211193/7f5c9c9b-4eda-4580-8ccc-7f1621a7bc7f)


# ì°¸ê³ ìë£Œ
Interceptorë€? https://kimvampa.tistory.com/127