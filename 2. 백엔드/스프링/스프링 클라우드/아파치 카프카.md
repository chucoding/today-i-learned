# Apache Kafka
Apache Software Foundationì˜ Scalar ì–¸ì–´ë¡œ ëœ ì˜¤í”ˆ ì†ŒìŠ¤ ë©”ì‹œì§€ ë¸Œë¡œì»¤ í”„ë¡œì íŠ¸
- ë§í¬ë“œì¸ì—ì„œ ê°œë°œ => Confluent
- Apple, Netflix, Kakao ë“±ë“± ë§ì€ íšŒì‚¬ì—ì„œ ì‚¬ìš©ì¤‘.
- ëŒ€ìš©ëŸ‰, ì•ˆì •ì„± ì¸¡ë©´ì—ì„œ RabbitMQ ë³´ë‹¤ ìš°ìœ„.
- ì‹¤ì‹œê°„ ì „ì†¡ê°€ëŠ¥ ë° í™•ì¥ì„±ì´ ë†’ìŒ(DB ì¢…ë¥˜ì— ìƒê´€ì—†ì´ ì¹´í”„ì¹´ë¡œ ë¶€í„° ë°›ì•„ì˜¤ë©´ ë¨.)
- Scale-out ê°€ëŠ¥

## Kafka Broker
Kafka Application Server

- 3ëŒ€ ì´ìƒì˜ Broker Cluster êµ¬ì„± ê¶Œì¥
- Zookeeper (ë©”íƒ€ë°ì´í„° ì €ì¥ ë° Controller ì •ë³´ ì €ì¥ ex. Broker ID, Controller ID)
- Broker nê°œ ì¤‘ 1ëŒ€ëŠ” Controller ê¸°ëŠ¥ ìˆ˜í–‰
    - ê° Broker íŒŒí‹°ì…˜ í• ë‹¹
    - Broker ëª¨ë‹ˆí„°ë§

## Kafka ì„¤ì¹˜
https://kafka.apache.org/downloads

```cmd
tar -xvf ë‹¤ìš´ë¡œë“œíŒŒì¼
```

## Kafka ê¸°ë™
### Zookeeper
ê¸°ë³¸ í¬íŠ¸ ë²ˆí˜¸ : 2181
```sh
$KAFKA_HOME/bin/zookeeper-server-start.sh $KAFKA_HOME/config/zookeeper.properties
```
```cmd
.\bin\windows\zookeeper-server-start.bat .\config\zookeeper.properties
```

ğŸ’¡ windowì—ì„œ ê¸°ë™ì‹œ ì£¼ì˜ì‚¬í•­
> ì…ë ¥ ì¤„ì´ ë„ˆë¬´ ê¹ë‹ˆë‹¤.
ëª…ë ¹ êµ¬ë¬¸ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.

kafka-server-start.batì‹¤í–‰ì‹œ ê°™ì€ í´ë” ì•ˆì— ìˆëŠ” kafka-run-class.batë¥¼ ì°¸ì¡°í•˜ì—¬ ê°™ì´ ì‹¤í–‰ì‹œí‚¤ëŠ”ë° ì—¬ê¸°ì„œ ë„ˆë¬´ ë§ì€ classpathë¥¼ í˜¸ì¶œí•˜ì—¬ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤. (ìœˆë„ìš° cmdëŠ” ëª…ë ¹ì¤„ì— 8192ê¸€ìê¹Œì§€ ì œí•œ)

ë”°ë¼ì„œ kafka-run-class.batì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •(ëŒ€ëµ 93ë¼ì¸ì¯¤ ìœ„ì¹˜)

before
```cmd
rem Classpath addition for release
for %%i in ("%BASE_DIR%\libs\*") do (
call :concat "%%i"
)
```

after
```cmd
rem Classpath addition for release
call :concat "%BASE_DIR%\libs\*;
```

### Kafka Server
ê¸°ë³¸ í¬íŠ¸ ë²ˆí˜¸ : 9092
```sh
$KAFKA_HOME/bin/kafka-server-start.sh $KAFKA_HOME/config/server.properties
```
```cmd
./kafka-server-start.bat ../../config/server.properties
```

## Kafka Client
ì¹´í”„ì¹´ì— ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë©´ ì»¨ìŠˆë¨¸(java í”„ë¡œê·¸ë¨)ë¡œ ì „ë‹¬í•´ì£¼ëŠ” í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨

### Topic
ì¹´í”„ì¹´ì—ì„œ ë©”ì‹œì§€ê°€ ì €ì¥ë˜ëŠ” ê³³

Topic ìƒì„±
```bash
$KAFKA_HOME/bin/kafka-topics.sh --create --topic quickstart-events --bootstrap-server localhost:9092 --partitions 1
```
```cmd
.\kafka-topics.bat --create --topic quickstart-e
vents --bootstrap-server localhost:9092 --partitions 1
```
- quickstart-events : í† í”½ì´ë¦„
- localhost:9092 : ì¹´í”„ì¹´ ê¸°ë³¸ì„œë²„
- partitions : ë©€í‹° í´ëŸ¬ìŠ¤í„°ë§ ì„¤ì •
  
Topic ëª©ë¡ í™•ì¸
```bash
$KAFKA_HOME/bin/kafka-topics.sh --bootstrap-server localhost:9092 --list
```
```cmd
.\kafka-topics.bat --bootstrap-server localhost:
9092 --list
```

Topic ì •ë³´ í™•ì¸
```bash
$KAFKA_HOME/bin/kafka-topics.sh --describe --topic quickstart-events --bootstrap-server localhost:9092
```
```cmd
.\kafka-topics.bat --describe --topic quickstart-events --bootstrap-server localhost:9092
```

### Producer
ë©”ì‹œì§€ ìƒì‚°

```bash
$KAFKA_HOME/bin/kafka-console-producer.sh --broker-list localhost:9092 --topic quickstart-events
```
```cmd
.\kafka-console-producer.bat --broker-list local
host:9092 --topic quickstart-events
```

### Consumer
ë©”ì‹œì§€ ì†Œë¹„

```bash
$KAFKA_HOME/bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic quickstart-events --from-beginning
```
```cmd
.\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic quickstart-events --from-beginning
```
- --from-beginning : ì²˜ìŒë¶€í„° ë°›ì•„ê°€ëŠ” ì˜µì…˜

## Kafka Connect
ë°ì´í„°ë² ì´ìŠ¤ì— ë³€ê²½ì‚¬í•­ì´ ìƒê²¼ì„ ë•Œ ì¹´í”„ì¹´ê°€ ê°ì§€í•˜ì—¬ ë‹¤ë¥¸ ìŠ¤í† ë¦¬ì§€ë‚˜ ì„œë¹„ìŠ¤ì— ì „ë‹¬í•˜ëŠ” ê¸°ëŠ¥