# Spring Cloud Config

yaml 파일 우선순위
```
1. bootstrap.yaml
2. application.yaml
3. application-name.yaml
4. application-name-<profile>.yaml
```
### 서버 환경 구성
1. pom.xml
```xml
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-config-server<artifactId>
</dependency>
```

2. application.yaml
```yaml
server:
  port: 8888

spring:
  application:
    name: config-service
  cloud:
    config:
      server:
        git:
          uri: file://C:\Users\hssuh\DISK\spring-cloud\git-local-repo
```
해당 git 파일을 참고해서 데이터를 불러온다.

### 클라이언트 환경 구성
pom.xml
```xml
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-config</artifactId>
</dependency>

<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-bootstrap</artifactId>
</dependency>
```

bootstrap.yaml
```yaml
spring:
  cloud:
    config:
      uri: http://127.0.0.1:8888
      name: ecommerce
```

### actuator 적용하기(config 커밋 후 refresh API로 클라이언트에 즉시 반영)
pom.xml
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
```

application.yaml
```yaml
management:
  endpoints:
    web:
      exposure:
        include: refresh, health, beans
```